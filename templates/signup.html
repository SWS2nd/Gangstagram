<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <link href="/static/signup.css" rel="stylesheet">

    <title>Signup</title>

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <script>
        // 로그인을 할 수 있는 sign.html로 이동합니다.
        function signin() {
            window.location.href = '/login'
        }

        // 회원가입 함수입니다.
        // 닉네임, 이메일 id, 비밀번호, (견주)성별, 주소, 견종, 견크기를 받아 DB에 저장합니다.
        function register() {
            $.ajax({
                type: "POST",
                url: "/sign_up/request",
                data: {
                    email_give: $('#useremail').val(),
                    pw_give: $('#userpw').val(),
                    nickname_give: $('#usernick').val(),
                    /* 라디오 버튼의 value값을 ajax로 넘길때 문법! */
                    owner_gender_give: $('input[name="usergender"]:checked').val(),
                    address_city_give: $('#address_city').val(),
                    address_gu_give: $('#address_gu').val(),
                    address_dong_give: $('#address_dong').val(),
                    dog_breed_give: $('#userdogbreed').val(),
                    dog_size_give: $('input[name="userdogsize"]:checked').val()
                },
                success: function (response) {
                    if (response['result'] == 'success') {
                        alert('회원가입이 완료되었습니다.')
                        window.location.href = '/login'
                    } else {
                        alert(response['msg'])
                    }
                }
            })
        }
    </script>
</head>
<body>

<div id="top">
    <img src="{{ url_for('static', filename='/image/img.png') }}" class="logo" alt="gangstagram">
</div>

<div class="container">

    <div class="mytitle">
        <h1><strong>Register</strong></h1>
        <p>or <a href="javascript:void(0)" onclick="signin()">sign in</a></p>
    </div>

    <div id="info_wrap">
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="usernick" placeholder="url">
            <label for="floatingInput">Nickname</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="useremail" placeholder="url">
            <label for="floatingInput">Email@xxxxx.com</label>
        </div>
        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="userpw" placeholder="url">
            <label for="floatingInput">Password</label>
        </div>
    </div>

    <div id="sex_check">
        <div class="form-check1">
            <input class="form-check-input" type="radio" name="usergender" value="male" class="flexRadioDefault1">
            <label class="form-check-label" for="flexRadioDefault1">
                남
            </label>
        </div>

        <div class="form-check2">
            <input class="form-check-input" type="radio" name="usergender" value="female" class="flexRadioDefault2" checked>
            <label class="form-check-label" for="flexRadioDefault2">
                여
            </label>
        </div>
    </div>
    </br>

    <div id="residence">
        <div class="row g-3">
            <div class="col">
                <input type="text" class="form-control" id="address_city" placeholder="도시" aria-label="First name">
            </div>
            <div class="col">
                <input type="text" class="form-control" id="address_gu" placeholder="구" aria-label="Last name">
            </div>
            <div class="col">
                <input type="text" class="form-control" id="address_dong" placeholder="동" aria-label="Last name">
            </div>
        </div>
    </div>
    </br>

    <div id="doginfo">
        <div class="col">
            <input type="text" class="form-control" id="userdogbreed" placeholder="애견종류" aria-label="Last name">
        </div>
    </div>
    </br>

    <div id="dogsize">
        <div class="form-check1">
            <input class="form-check-input" type="radio" name="userdogsize" value="large" id="flexRadioDefault1">
            <label class="form-check-label" for="flexRadioDefault1">
                대형견
            </label>
        </div>

        <div class="form-check2">
            <input class="form-check-input" type="radio" name="userdogsize" value="medium" class="flexRadioDefault2" checked>
            <label class="form-check-label" for="flexRadioDefault2">
                중형견
            </label>
        </div>
        <div class="form-check2">
            <input class="form-check-input" type="radio" name="userdogsize" value="small" class="flexRadioDefault2">
            <label class="form-check-label" for="flexRadioDefault2">
                소형견
            </label>
        </div>
    </div>

    </br>
    </br>
    <div id="done">
        <div class="d-grid gap-3">
            <button class="btn btn-primary" type="button" onclick="register()">강집사 생성^^!</button>
        </div>
    </div>


</div>

</body>
</html>